(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9888:function(e,t,s){Promise.resolve().then(s.bind(s,4661))},4661:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return N}});var a=s(7437),r=s(2265),l=s(429),i=s(9763);let c=(0,i.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);var n=s(2208);let d=(0,i.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);var o=s(1723),x=s(9397),h=s(5805),m=s(9474),u=s(401),y=s(8867);let p=(0,i.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var v=s(7648),f=s(4508),j=s(9064);function N(){let[e,t]=(0,r.useState)(null),[s,i]=(0,r.useState)([]),[N,g]=(0,r.useState)([]),[w,b]=(0,r.useState)({totalPosts:0,totalViews:0,activePosts:0,expiredPosts:0}),[k,Z]=(0,r.useState)(!0),[P,D]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{M()},[]);let M=async()=>{try{let e=localStorage.getItem("token");if(!e){window.location.href="/auth/login";return}let[a,r,l]=await Promise.all([fetch("/api/user/profile",{headers:{Authorization:"Bearer ".concat(e)}}),fetch("/api/user/parties",{headers:{Authorization:"Bearer ".concat(e)}}),fetch("/api/user/lfg",{headers:{Authorization:"Bearer ".concat(e)}})]);if(a.ok){let e=await a.json();t(e.data)}if(r.ok){let e=await r.json();i(e.data.parties||[])}if(l.ok){let e=await l.json();g(e.data.lfgRequests||[])}let c=[...s,...N];b({totalPosts:c.length,totalViews:c.reduce((e,t)=>e+t.views,0),activePosts:c.filter(e=>"Active"===e.status).length,expiredPosts:c.filter(e=>"Expired"===e.status).length})}catch(e){console.error("Error fetching user data:",e),j.ZP.error("Failed to load dashboard data")}finally{Z(!1)}},E=async(e,t)=>{try{await (0,f.vQ)(e),D(e=>new Set(Array.from(e).concat([t]))),j.ZP.success("Copied to clipboard!"),setTimeout(()=>{D(e=>{let s=new Set(Array.from(e));return s.delete(t),s})},2e3)}catch(e){j.ZP.error("Failed to copy")}},C=async(e,t)=>{if(confirm("Are you sure you want to delete this post?"))try{let s=localStorage.getItem("token");(await fetch("/api/".concat("party"===t?"parties":"lfg","/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}})).ok?(j.ZP.success("Post deleted successfully"),M()):j.ZP.error("Failed to delete post")}catch(e){j.ZP.error("An error occurred")}};return k?(0,a.jsx)("div",{className:"min-h-screen bg-valorant-dark py-20",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-600 rounded w-1/4 mb-8"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-600 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-6 bg-gray-600 rounded w-1/2"})]},t))})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-valorant-dark py-20",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-4xl font-bold text-white mb-2",children:["Welcome back, ",(null==e?void 0:e.riotId)||"Player","!"]}),(0,a.jsx)("p",{className:"text-valorant-light/80",children:"Manage your parties, LFG requests, and track your activity."})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)(c,{className:"w-6 h-6 text-valorant-red mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:w.totalPosts}),(0,a.jsx)("div",{className:"text-valorant-light/60 text-sm",children:"Total Posts"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)(n.Z,{className:"w-6 h-6 text-valorant-red mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:w.totalViews}),(0,a.jsx)("div",{className:"text-valorant-light/60 text-sm",children:"Total Views"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)(d,{className:"w-6 h-6 text-valorant-red mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:w.activePosts}),(0,a.jsx)("div",{className:"text-valorant-light/60 text-sm",children:"Active Posts"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)(o.Z,{className:"w-6 h-6 text-valorant-red mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:w.expiredPosts}),(0,a.jsx)("div",{className:"text-valorant-light/60 text-sm",children:"Expired Posts"})]})]}),(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"mb-8",children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)(v.default,{href:"/create-party",className:"btn-primary flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Create Party"})]}),(0,a.jsxs)(v.default,{href:"/create-lfg",className:"btn-outline flex items-center space-x-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Post LFG Request"})]}),(0,a.jsxs)(v.default,{href:"/parties",className:"btn-secondary flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Browse Parties"})]})]})]})}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-valorant-red mr-2"}),"Your Parties"]}),s.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[s.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"bg-valorant-gray/50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-white font-medium",children:[e.size," Party"]}),(0,a.jsxs)("p",{className:"text-valorant-light/60 text-sm",children:[e.region," • ",e.rank," • ",e.mode]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>E(e.code,e._id),className:"btn-secondary text-xs",children:P.has(e._id)?(0,a.jsx)(u.Z,{className:"w-3 h-3"}):(0,a.jsx)(y.Z,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:()=>C(e._id,"party"),className:"text-red-400 hover:text-red-300",children:(0,a.jsx)(p,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-valorant-light/60",children:[(0,a.jsxs)("span",{children:[e.views," views"]}),(0,a.jsx)("span",{className:"".concat("Active"===e.status?"text-green-400":"text-yellow-400"),children:e.status})]})]},e._id)),s.length>5&&(0,a.jsx)(v.default,{href:"/dashboard/parties",className:"text-valorant-red hover:text-red-400 text-sm",children:"View all parties →"})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"w-12 h-12 text-valorant-light/40 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-valorant-light/60 mb-4",children:"No parties created yet"}),(0,a.jsx)(v.default,{href:"/create-party",className:"btn-primary",children:"Create Your First Party"})]})]})}),(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-valorant-red mr-2"}),"Your LFG Requests"]}),N.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[N.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"bg-valorant-gray/50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:e.username}),(0,a.jsxs)("p",{className:"text-valorant-light/60 text-sm",children:[e.rank," • ",e.playstyle.join(", ")]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>E(e.username,e._id),className:"btn-secondary text-xs",children:P.has(e._id)?(0,a.jsx)(u.Z,{className:"w-3 h-3"}):(0,a.jsx)(y.Z,{className:"w-3 h-3"})}),(0,a.jsx)("button",{onClick:()=>C(e._id,"lfg"),className:"text-red-400 hover:text-red-300",children:(0,a.jsx)(p,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-valorant-light/60",children:[(0,a.jsxs)("span",{children:[e.views," views"]}),(0,a.jsx)("span",{className:"".concat("Active"===e.status?"text-green-400":"text-yellow-400"),children:e.status})]})]},e._id)),N.length>5&&(0,a.jsx)(v.default,{href:"/dashboard/lfg",className:"text-valorant-red hover:text-red-400 text-sm",children:"View all LFG requests →"})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"w-12 h-12 text-valorant-light/40 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-valorant-light/60 mb-4",children:"No LFG requests posted yet"}),(0,a.jsx)(v.default,{href:"/create-lfg",className:"btn-primary",children:"Post Your First LFG Request"})]})]})})]})]})})}},4508:function(e,t,s){"use strict";function a(e){let t=Math.floor((new Date().getTime()-e.getTime())/1e3);return t<60?"just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):"".concat(Math.floor(t/86400),"d ago")}function r(e){return({Iron:"text-gray-400",Bronze:"text-amber-600",Silver:"text-gray-300",Gold:"text-yellow-500",Platinum:"text-green-400",Diamond:"text-blue-400",Immortal:"text-purple-400",Radiant:"text-yellow-300"})[e]||"text-gray-400"}function l(e){return({Iron:"⚔️",Bronze:"\uD83E\uDD49",Silver:"\uD83E\uDD48",Gold:"\uD83E\uDD47",Platinum:"\uD83D\uDC8E",Diamond:"\uD83D\uDCA0",Immortal:"\uD83D\uDC51",Radiant:"⭐"})[e]||"⚔️"}function i(e){if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(e);{let t=document.createElement("textarea");return t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select(),new Promise((e,s)=>{document.execCommand("copy")?e():s(),t.remove()})}}s.d(t,{NK:function(){return r},SY:function(){return a},_D:function(){return l},vQ:function(){return i}})},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8867:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9474:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[710,64,648,971,117,744],function(){return e(e.s=9888)}),_N_E=e.O()}]);