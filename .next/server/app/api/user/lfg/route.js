"use strict";(()=>{var e={};e.id=827,e.ids=[827],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},5746:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{GET:()=>d});var i=t(9303),s=t(8716),o=t(3131),u=t(7070),a=t(2021),l=t(2171),p=t(9178);async function d(e){try{await (0,a.Z)();let r=(0,p.bE)(e);if(!r)return u.NextResponse.json({success:!1,error:"Authentication required"},{status:401});let t=await l.Z.find({userId:r}).populate("userId","riotId verified").sort({createdAt:-1});return u.NextResponse.json({success:!0,data:{lfgRequests:t}})}catch(e){return console.error("Get user LFG requests error:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/user/lfg/route",pathname:"/api/user/lfg",filename:"route",bundlePath:"app/api/user/lfg/route"},resolvedPagePath:"C:\\Users\\jgero\\Desktop\\myprograms\\valo\\app\\api\\user\\lfg\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:f}=c,y="/api/user/lfg/route";function v(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:g})}},9178:(e,r,t)=>{t.d(r,{Gv:()=>l,RA:()=>p,bE:()=>d,c_:()=>a});var n=t(1482),i=t.n(n),s=t(2023),o=t.n(s);let u="your-super-secret-jwt-key-change-this-in-production";async function a(e){return o().hash(e,12)}async function l(e,r){return o().compare(e,r)}function p(e){return i().sign(e,u,{expiresIn:"7d"})}function d(e){let r=function(e){let r=e.headers.get("authorization");return r&&r.startsWith("Bearer ")?r.substring(7):null}(e);if(!r)return null;let t=function(e){try{return i().verify(e,u)}catch(e){return null}}(r);return t?.userId||null}},2021:(e,r,t)=>{t.d(r,{Z:()=>u});var n=t(1185),i=t.n(n);let s="mongodb+srv://jgero961_db_user:5vS64ihmut6ImZ7i@cluster0.n1v0f5m.mongodb.net/valorant-party-finder?retryWrites=true&w=majority&appName=Cluster0";if(!s)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let u=async function(){if(o.conn)return o.conn;o.promise||(o.promise=i().connect(s,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},2171:(e,r,t)=>{t.d(r,{Z:()=>o});var n=t(1185),i=t.n(n);let s=new n.Schema({userId:{type:n.Schema.Types.ObjectId,ref:"User",required:!0},username:{type:String,required:!0,trim:!0},rank:{type:String,required:!0,enum:["Iron","Bronze","Silver","Gold","Platinum","Diamond","Immortal","Radiant"]},playstyle:[{type:String,enum:["Duelist","Initiator","Controller","Sentinel","Flexible"]}],availability:{type:String,required:!0},description:{type:String,maxlength:500},tags:[{type:String,enum:["18+","Mic Required","Chill","Competitive","Learning","Fun","Serious","Beginner Friendly"]}],expiresAt:{type:Date,default:()=>new Date(Date.now()+36e5)},views:{type:Number,default:0},status:{type:String,enum:["Active","Expired","Cancelled"],default:"Active"}},{timestamps:!0});s.index({status:1,expiresAt:1}),s.index({rank:1,playstyle:1}),s.index({createdAt:-1}),s.index({userId:1}),s.index({expiresAt:1},{expireAfterSeconds:0});let o=i().models.LFGRequest||i().model("LFGRequest",s)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[948,644],()=>t(5746));module.exports=n})();