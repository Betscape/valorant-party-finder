"use strict";(()=>{var e={};e.id=2,e.ids=[2],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},6162:e=>{e.exports=require("stream")},1764:e=>{e.exports=require("util")},6906:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{POST:()=>p});var n=t(9303),o=t(8716),i=t(3131),a=t(7070),u=t(2021),l=t(1732),c=t(9178);async function p(e){try{await (0,u.Z)();let{email:r,password:t,riotId:s}=await e.json();if(!r||!t||!s)return a.NextResponse.json({success:!1,error:"All fields are required"},{status:400});if(t.length<6)return a.NextResponse.json({success:!1,error:"Password must be at least 6 characters"},{status:400});if(!/^[a-zA-Z0-9]+#[0-9]+$/.test(s))return a.NextResponse.json({success:!1,error:"Invalid Riot ID format. Use: Username#1234"},{status:400});if(await l.Z.findOne({$or:[{email:r},{riotId:s}]}))return a.NextResponse.json({success:!1,error:"User with this email or Riot ID already exists"},{status:400});let n=await (0,c.c_)(t),o=new l.Z({email:r,password:n,riotId:s});await o.save();let i=(0,c.RA)({userId:o._id.toString(),email:o.email});return a.NextResponse.json({success:!0,data:{token:i,user:{id:o._id,email:o.email,riotId:o.riotId,verified:o.verified}}})}catch(e){return console.error("Registration error:",e),a.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"C:\\Users\\jgero\\Desktop\\myprograms\\valo\\app\\api\\auth\\register\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:f}=d,g="/api/auth/register/route";function v(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},9178:(e,r,t)=>{t.d(r,{Gv:()=>l,RA:()=>c,bE:()=>p,c_:()=>u});var s=t(1482),n=t.n(s),o=t(2023),i=t.n(o);let a="your-super-secret-jwt-key-change-this-in-production";async function u(e){return i().hash(e,12)}async function l(e,r){return i().compare(e,r)}function c(e){return n().sign(e,a,{expiresIn:"7d"})}function p(e){let r=function(e){let r=e.headers.get("authorization");return r&&r.startsWith("Bearer ")?r.substring(7):null}(e);if(!r)return null;let t=function(e){try{return n().verify(e,a)}catch(e){return null}}(r);return t?.userId||null}},2021:(e,r,t)=>{t.d(r,{Z:()=>a});var s=t(1185),n=t.n(s);let o="mongodb+srv://jgero961_db_user:5vS64ihmut6ImZ7i@cluster0.n1v0f5m.mongodb.net/valorant-party-finder?retryWrites=true&w=majority&appName=Cluster0";if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let a=async function(){if(i.conn)return i.conn;i.promise||(i.promise=n().connect(o,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},1732:(e,r,t)=>{t.d(r,{Z:()=>i});var s=t(1185),n=t.n(s);let o=new s.Schema({email:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0,index:!0},password:{type:String,required:!0,minlength:6},riotId:{type:String,required:!0,trim:!0,index:!0},bio:{type:String,maxlength:500},verified:{type:Boolean,default:!1},blocked:[{type:s.Schema.Types.ObjectId,ref:"User"}]},{timestamps:!0}),i=n().models.User||n().model("User",o)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,644],()=>t(6906));module.exports=s})();